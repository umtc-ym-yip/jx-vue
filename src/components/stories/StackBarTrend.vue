<template>
  <D3StackBarTrend :data="data" :xKey="'LotNum'" :yKey="'Yield'" :seriesKeyArray="seriesKeyArray" />
</template>
<script setup>
import { ref, computed } from 'vue'
import D3StackBarTrend from '../d3/D3StackBarTrend.vue'

const data = ref([
  {
    A1: null,
    A2: null,
    A5: null,
    A6: null,
    A7: null,
    A8: null,
    A9: null,
    A10: null,
    A12: null,
    A13: null,
    A16: null,
    A17: null,
    A18: null,
    A19: null,
    A20: null,
    A21: null,
    A22: null,
    A41: null,
    A71: null,
    B4: null,
    J6: null,
    LayerCount: null,
    LotNum: '243QE001-01-02',
    LotType: 'E3_實驗3',
    O1: null,
    O8: null,
    O10: null,
    O52: null,
    P2: null,
    P3: null,
    PN: '3273187',
    Remark: '',
    S2: null,
    S9: '0.0093',
    S10: null,
    S11: null,
    S12: null,
    S13: null,
    S14: null,
    S15: null,
    S21: null,
    Time: '2024-08-08T11:11:45.000Z',
    Top1: '0.0093',
    Top2: null,
    Top3: null,
    Top_1: 'S9',
    Top_2: null,
    Top_3: null,
    ULMark94V: null,
    Yield: '0.9907',
    sf_link: null
  },
  {
    A1: null,
    A2: null,
    A5: null,
    A6: null,
    A7: null,
    A8: null,
    A9: null,
    A10: null,
    A12: null,
    A13: null,
    A16: null,
    A17: null,
    A18: '0.0104',
    A19: null,
    A20: null,
    A21: null,
    A22: null,
    A41: null,
    A71: null,
    B4: null,
    J6: null,
    LayerCount: null,
    LotNum: '243QE001-01-00',
    LotType: 'R3_研發不可出貨批',
    O1: null,
    O8: null,
    O10: null,
    O52: null,
    P2: null,
    P3: null,
    PN: '3273187',
    Remark: '',
    S2: null,
    S9: null,
    S10: null,
    S11: '0.0035',
    S12: null,
    S13: null,
    S14: null,
    S15: null,
    S21: null,
    Time: '2024-08-11T16:53:21.000Z',
    Top1: '0.0104',
    Top2: '0.0035',
    Top3: null,
    Top_1: 'A18',
    Top_2: 'S11',
    Top_3: null,
    ULMark94V: null,
    Yield: '0.9861',
    sf_link: null
  },
  {
    A1: '0.0208',
    A2: null,
    A5: null,
    A6: null,
    A7: null,
    A8: null,
    A9: null,
    A10: null,
    A12: null,
    A13: null,
    A16: null,
    A17: null,
    A18: null,
    A19: null,
    A20: null,
    A21: null,
    A22: null,
    A41: null,
    A71: null,
    B4: null,
    J6: null,
    LayerCount: null,
    LotNum: '243QE001-01-04',
    LotType: 'E3_實驗3',
    O1: null,
    O8: null,
    O10: null,
    O52: null,
    P2: null,
    P3: null,
    PN: '3273187',
    Remark: '',
    S2: null,
    S9: '0.0139',
    S10: '0.0069',
    S11: null,
    S12: null,
    S13: null,
    S14: null,
    S15: null,
    S21: null,
    Time: '2024-09-27T02:43:56.000Z',
    Top1: '0.0208',
    Top2: '0.0139',
    Top3: '0.0069',
    Top_1: 'A1',
    Top_2: 'S9',
    Top_3: 'S10',
    ULMark94V: null,
    Yield: '0.9584',
    sf_link: null
  },
  {
    A1: null,
    A2: null,
    A5: null,
    A6: null,
    A7: null,
    A8: null,
    A9: null,
    A10: null,
    A12: null,
    A13: null,
    A16: null,
    A17: null,
    A18: null,
    A19: null,
    A20: null,
    A21: '0.0012',
    A22: null,
    A41: null,
    A71: null,
    B4: null,
    J6: null,
    LayerCount: null,
    LotNum: '245GE001-01-00',
    LotType: 'S1_樣品1',
    O1: null,
    O8: null,
    O10: null,
    O52: null,
    P2: null,
    P3: null,
    PN: '3273187',
    Remark: '',
    S2: null,
    S9: null,
    S10: null,
    S11: '0.0012',
    S12: null,
    S13: null,
    S14: null,
    S15: null,
    S21: null,
    Time: '2024-10-10T11:34:20.000Z',
    Top1: '0.0012',
    Top2: '0.0012',
    Top3: null,
    Top_1: 'A21',
    Top_2: 'S11',
    Top_3: null,
    ULMark94V: null,
    Yield: '0.9976',
    sf_link: null
  },
  {
    A1: null,
    A2: null,
    A5: null,
    A6: null,
    A7: null,
    A8: null,
    A9: null,
    A10: null,
    A12: null,
    A13: null,
    A16: null,
    A17: null,
    A18: '0.0058',
    A19: null,
    A20: null,
    A21: null,
    A22: null,
    A41: null,
    A71: null,
    B4: null,
    J6: null,
    LayerCount: null,
    LotNum: '247TE015-01-00',
    LotType: 'S1_樣品1',
    O1: null,
    O8: null,
    O10: null,
    O52: null,
    P2: null,
    P3: null,
    PN: '3273187',
    Remark: '',
    S2: null,
    S9: null,
    S10: null,
    S11: '0.0006',
    S12: null,
    S13: null,
    S14: null,
    S15: null,
    S21: null,
    Time: '2024-10-10T23:00:04.000Z',
    Top1: '0.0058',
    Top2: '0.0006',
    Top3: null,
    Top_1: 'A18',
    Top_2: 'S11',
    Top_3: null,
    ULMark94V: null,
    Yield: '0.9936',
    sf_link: null
  }
])

const seriesKeyArray = computed(() => {
  return Object.keys(data.value[0]).filter(
    (key) =>
      key !== 'PN' &&
      key !== 'LotNum' &&
      key !== 'LotType' &&
      key !== 'Time' &&
      key !== 'Top_1' &&
      key !== 'Top1' &&
      key !== 'Top_2' &&
      key !== 'Top2' &&
      key !== 'Top_3' &&
      key !== 'Top3' &&
      key !== 'Yield' &&
      key !== 'Remark' &&
      key !== 'sf_link' &&
      key !== 'LayerCount' &&
      key !== 'ULMark94V'
  )
})
</script>
